# ORAN 이상 탐지 시스템을 위한 CFM 데이터 요구사항

## 문서 정보

- **제목**: CFM 메트릭 데이터 요구사항 명세서
- **버전**: 1.0
- **작성일**: 2025-10-22
- **수신**: CFM 담당자
- **발신**: OCAD 개발팀

## 1. 목적

ORAN 네트워크의 이상 탐지 AI 시스템 개발을 위해 CFM-Lite 메트릭 데이터가 필요합니다.

본 문서는:
- 어떤 데이터가 필요한지
- 어떤 형식으로 제공받고 싶은지
- 각 필드의 의미와 중요도

를 명확히 하여, CFM 담당자께서 수집 가능 여부를 판단하실 수 있도록 작성되었습니다.

## 2. 데이터 형식

### 2.1 파일 형식

**권장 형식** (우선순위 순):
1. **CSV (.csv)** - 가장 범용적, 모든 도구에서 읽기 가능
2. **Excel (.xlsx)** - 사람이 보기 편함, 메타데이터 추가 가능
3. **Parquet (.parquet)** - 대용량 데이터에 적합 (10만 행 이상)

**문자 인코딩**: UTF-8

### 2.2 제공 방식

다음 중 가능한 방식을 선택해주세요:

- [ ] **파일 전달** (이메일/USB)
  - 주기: [ ] 일일 [ ] 주간 [ ] 월간
- [ ] **공유 폴더** (네트워크 드라이브/클라우드)
  - 자동 업로드 가능 여부: [ ] 가능 [ ] 불가
- [ ] **SFTP/FTP**
  - 서버 정보 제공 가능: [ ] 가능 [ ] 불가
- [ ] **데이터베이스 접근**
  - Read-only 계정 제공 가능: [ ] 가능 [ ] 불가

### 2.3 데이터 양

**예상 데이터 양** (CFM 담당자께서 확인해주세요):

- 모니터링 대상 장비 수: _________ 대
- 메트릭 수집 주기: [ ] 1초 [ ] 5초 [ ] 10초 [ ] 60초 [ ] 기타: _____
- 하루 예상 데이터 건수: _________ 건
- 하루 예상 파일 크기: _________ MB

## 3. 필수 필드 (Mandatory)

### 이 3개 필드는 반드시 필요합니다

| 필드명 | 타입 | 설명 | 예시 | 수집 가능? |
|--------|------|------|------|-----------|
| `timestamp` | datetime | 메트릭 측정 시각 | 2025-10-22 09:00:00 | [ ] 예 [ ] 아니오 |
| `endpoint_id` | string | 장비 식별자 (O-RU/O-DU ID) | o-ru-001, o-du-005 | [ ] 예 [ ] 아니오 |
| `udp_echo_rtt_ms` | float | UDP Echo 왕복 시간 (Round Trip Time) | 5.2 | [ ] 예 [ ] 아니오 |

**만약 위 3개 필드를 수집할 수 없다면**:
- 사유: _______________________________________________________________
- 대안: _______________________________________________________________

**최소 데이터셋 예시** (CSV):
```csv
timestamp,endpoint_id,udp_echo_rtt_ms
2025-10-22 09:00:00,o-ru-001,5.2
2025-10-22 09:00:01,o-ru-001,5.4
2025-10-22 09:00:02,o-ru-001,25.8
```

## 4. 권장 필드 (Recommended)

### 가능하다면 다음 필드도 제공 부탁드립니다

| 필드명 | 타입 | 설명 | 단위 | 수집 가능? | 대안 |
|--------|------|------|------|-----------|------|
| `ecpri_delay_us` | float | eCPRI 일방향 지연 (One-Way Delay) | 마이크로초 (μs) | [ ] 예 [ ] 아니오 | |
| `lbm_rtt_ms` | float | LBM 왕복 시간 | 밀리초 (ms) | [ ] 예 [ ] 아니오 | |
| `lbm_success` | boolean | LBM 메시지 성공 여부 | TRUE/FALSE | [ ] 예 [ ] 아니오 | |
| `ccm_interval_ms` | int | CCM 메시지 도착 간격 | 밀리초 (ms) | [ ] 예 [ ] 아니오 | |
| `ccm_miss_count` | int | CCM 메시지 연속 누락 횟수 | 정수 | [ ] 예 [ ] 아니오 | |

**CFM-Lite 메트릭 설명**:

- **UDP Echo**: 단순 ping과 유사, 네트워크 기본 지연 측정
- **eCPRI**: ORAN fronthaul 지연 측정
- **LBM (Loopback Message)**: CFM 루프백 테스트
- **CCM (Continuity Check Message)**: CFM 연속성 확인

## 5. 선택 필드 (Optional)

### 추가 분석을 위한 필드 (없어도 됩니다)

| 필드명 | 타입 | 설명 | 수집 가능? |
|--------|------|------|-----------|
| `site_name` | string | 사이트/기지국 이름 | [ ] 예 [ ] 아니오 |
| `zone` | string | 지역 구분 (Urban/Rural/Suburban) | [ ] 예 [ ] 아니오 |
| `port_crc_errors` | int | 포트 CRC 에러 누적 수 | [ ] 예 [ ] 아니오 |
| `queue_drops` | int | 큐 드롭 누적 수 | [ ] 예 [ ] 아니오 |
| `lldp_neighbor` | string | LLDP 이웃 장비 정보 | [ ] 예 [ ] 아니오 |
| `notes` | string | 비고 (운영자 메모) | [ ] 예 [ ] 아니오 |

**대안**:
- `site_name`, `zone` 등은 별도 매핑 파일(CSV)로 제공 가능
  - 예: `endpoint_mapping.csv`
    ```csv
    endpoint_id,site_name,zone,latitude,longitude
    o-ru-001,Tower-A,Urban,37.5665,126.9780
    o-ru-002,Tower-B,Rural,37.4563,127.1324
    ```

## 6. 샘플 데이터

### 6.1 Wide Format (권장 - 사람이 보기 편함)

**파일**: `sample_oran_metrics_wide.csv` (첨부)

```csv
timestamp,endpoint_id,site_name,zone,udp_echo_rtt_ms,ecpri_delay_us,lbm_rtt_ms,lbm_success,notes
2025-10-22 09:00:00,o-ru-001,Tower-A,Urban,5.2,102.3,7.1,TRUE,정상
2025-10-22 09:00:01,o-ru-001,Tower-A,Urban,5.4,105.2,7.3,TRUE,정상
2025-10-22 09:00:02,o-ru-001,Tower-A,Urban,25.8,250.1,22.5,FALSE,⚠️ 높은 RTT 발생
2025-10-22 09:00:03,o-ru-001,Tower-A,Urban,26.2,255.3,23.1,FALSE,⚠️ 지속됨
2025-10-22 09:00:04,o-ru-001,Tower-A,Urban,5.1,100.8,7.0,TRUE,정상 복구
2025-10-22 09:00:00,o-ru-002,Tower-B,Rural,4.8,98.5,6.9,TRUE,정상
```

### 6.2 Long Format (대안 - 확장성 좋음)

**파일**: `sample_oran_metrics_long.csv` (참고용)

```csv
timestamp,endpoint_id,metric_name,value,unit
2025-10-22 09:00:00,o-ru-001,udp_echo_rtt,5.2,ms
2025-10-22 09:00:00,o-ru-001,ecpri_delay,102.3,us
2025-10-22 09:00:00,o-ru-001,lbm_rtt,7.1,ms
2025-10-22 09:00:01,o-ru-001,udp_echo_rtt,5.4,ms
```

## 7. 데이터 품질 요구사항

### 7.1 타임스탬프

- **포맷**: 다음 중 하나
  - ISO 8601: `2025-10-22T09:00:00Z`
  - 일반: `2025-10-22 09:00:00`
  - Unix timestamp: `1729584000000` (밀리초)

- **시간대**: [ ] UTC [ ] KST [ ] 기타: _____

- **정확도**: 측정 시각과 기록 시각의 오차는 얼마나 되나요?
  - [ ] 1초 이내  [ ] 5초 이내  [ ] 기타: _____

### 7.2 결측값 (Missing Value)

메트릭을 측정하지 못한 경우 어떻게 표시되나요?

- [ ] 빈 셀 (empty)
- [ ] NULL
- [ ] -1
- [ ] 기타: _____

### 7.3 이상값 (Outlier)

비정상적으로 큰/작은 값이 나올 수 있나요?

- 최소값: _____ (예: 0)
- 최대값: _____ (예: 1000)
- 이상값 처리: [ ] 제거 [ ] 그대로 [ ] 특정 값으로 대체

## 8. 질문 사항

### 8.1 수집 환경

1. **CFM 기능 활성화 여부**:
   - UDP Echo: [ ] 활성화 [ ] 비활성화
   - eCPRI Delay: [ ] 활성화 [ ] 비활성화
   - LBM: [ ] 활성화 [ ] 비활성화
   - CCM: [ ] 활성화 [ ] 비활성화

2. **메트릭 수집 주기**:
   - 현재 설정된 주기: _____ 초
   - 변경 가능 여부: [ ] 가능 [ ] 불가능

3. **데이터 보관 기간**:
   - 실시간 데이터: _____ 일
   - 아카이브 데이터: _____ 일/월

### 8.2 장비 정보

1. **모니터링 대상**:
   - O-RU 수: _____ 대
   - O-DU 수: _____ 대
   - 기타: _____

2. **O-RU/O-DU 식별자 형식**:
   - 예시: _____ (예: o-ru-001, site-A-ru-01)
   - 규칙: _____

3. **네트워크 토폴로지**:
   - 별도 문서 제공 가능: [ ] 가능 [ ] 불가능

### 8.3 제약 사항

1. **보안/개인정보**:
   - 데이터 반출 제약: [ ] 있음 [ ] 없음
   - 익명화 필요: [ ] 필요 [ ] 불필요

2. **접근 제한**:
   - VPN 필요: [ ] 필요 [ ] 불필요
   - 특정 시간대만 접근 가능: [ ] 예 [ ] 아니오

## 9. 예상 이상 케이스

AI 시스템이 탐지하려는 이상 유형입니다. 각 유형이 실제로 발생하는지 확인 부탁드립니다.

| 이상 유형 | 특징 | 실제 발생? | 예시 데이터 |
|----------|------|-----------|------------|
| **Spike (급증)** | RTT가 갑자기 5배 이상 증가 | [ ] 예 [ ] 아니오 | 5ms → 25ms |
| **Drift (점진 증가)** | RTT가 서서히 증가하여 기준치 초과 | [ ] 예 [ ] 아니오 | 5ms → 8ms → 12ms |
| **Loss (패킷 손실)** | LBM 실패가 연속으로 발생 | [ ] 예 [ ] 아니오 | FALSE, FALSE, FALSE |
| **Jitter (불안정)** | RTT가 불규칙하게 크게 변동 | [ ] 예 [ ] 아니오 | 5ms → 15ms → 6ms |
| **Outage (중단)** | 모든 메트릭이 측정 불가 | [ ] 예 [ ] 아니오 | NULL, NULL, NULL |

**실제 이상 사례**:
과거에 발생했던 이상 사례가 있다면 간단히 설명 부탁드립니다.

- 사례 1: _______________________________________________________________
- 사례 2: _______________________________________________________________

## 10. 다음 단계

### 10.1 검토 부탁드리는 사항

1. **필수 필드 (3개)** 수집 가능 여부 확인
2. **권장 필드** 중 수집 가능한 것 체크
3. **질문 사항** 답변
4. **샘플 데이터 파일** 검토

### 10.2 회의 일정

- 제안 일시: _______________
- 참석자: OCAD 개발팀 + CFM 담당자
- 안건:
  1. 데이터 요구사항 최종 확정
  2. 제공 방식 및 주기 결정
  3. 테스트 데이터 제공 일정 협의

## 11. 연락처

**OCAD 개발팀**
- 담당자: _______________
- 이메일: _______________
- 전화: _______________

## 부록

### A. 용어 설명

- **CFM (Connectivity Fault Management)**: IEEE 802.1ag 표준, 네트워크 연결성 모니터링
- **LBM (Loopback Message)**: 특정 엔드포인트로 루프백 메시지를 보내어 응답 확인
- **CCM (Continuity Check Message)**: 주기적으로 연속성 확인 메시지 교환
- **eCPRI**: Enhanced Common Public Radio Interface, ORAN fronthaul 프로토콜
- **RTT (Round Trip Time)**: 왕복 시간, 메시지를 보내고 응답받는 데 걸리는 시간

### B. 참고 문서

- ORAN Alliance WG6: Cloudification and Orchestration
- IEEE 802.1ag: Connectivity Fault Management
- eCPRI Specification v2.0

---

**작성**: OCAD 개발팀
**일자**: 2025-10-22
**버전**: 1.0
**상태**: 초안 (CFM 담당자 검토 대기)
